<style>
  body{
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  .results{
    height: 50px;
    width: 50px;
    border-radius: 2px;
    background-color:#2d2d2d; 
    margin: 4px;
  }
</style>


<h2>Style Manager</h2>
<div id="all-styles"></div>

<script>

onmessage = (event) => {
  //console.log("got this from the plugin code", event.data.pluginMessage)
  console.log(event.data.pluginMessage)
  
  var temp;
  var r;
  var g;
  var b;
  let colorArray = [];
  
  for (let i = 0; i < 3; i++) {
    temp = document.createElement('div');
    temp.className = 'results';
    temp.innerHTML = event.data.pluginMessage[i].id;
    document.getElementById('all-styles').appendChild(temp);
    temp.style.opacity = event.data.pluginMessage[i].opacity;
    
    r =  (event.data.pluginMessage[i].color.r*255);
    g =  (event.data.pluginMessage[i].color.g*255);
    b =  (event.data.pluginMessage[i].color.b*255);
    colorArray.push('rgb(' + r +', ' + g +', ' + b + ')');
    //var item = document.querySelector('.results');
    //temp.style.backgroundColor = colorArray[i];
    //temp.style.backgroundColor = 'rgb(0,' + ' , 0)';
    //console.log('rgb(' + r +', ' + g +', ' + b + ')');
    
  }
  //console.log(colorArray)
 
  document.querySelector('.results')
  var nodes = document.getElementById('all-styles').getElementsByTagName('div');

  console.log(nodes);

  for (let i = 0; i < 3; i++) {
    nodes[i].style.backgroundColor = colorArray[i];
    console.log(nodes[i]);
    console.log(colorArray[i])
  } 


  
}


</script>
